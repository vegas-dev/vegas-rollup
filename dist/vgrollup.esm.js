// @vegas-VGRollup v1.1.2
class t{constructor(t,s,i){if(this.target=t||void 0,this.classes={hidden:"vg-rollup-content--hidden",fade:"vg-rollup-content--fade",ellipsis:"vg-rollup-content--ellipsis",button:"vg-rollup-content--button",transition:"vg-rollup-content--transition"},this.settings=e({content:"text",fade:!0,transition:!1,ellipsis:{line:null},button:!0,buttonText:{more:"More",less:"Less"}},s),this.target){let t=document.getElementById(this.target);this.init(t);let e=document.querySelector('[data-rollup-toggle="'+this.target+'"]');e&&this.toggle(e,i)}else console.error("Initialization failed")}init(t,e=!0){let s=this,i=t.clientHeight,n=parseInt(t.dataset.height)||i/2,a="false"!==t.dataset.fade&&s.settings.fade,l="true"===t.dataset.transition||s.settings.transition,o=t.dataset.line||null!==s.settings.ellipsis.line,r="false"!==t.dataset.button&&s.settings.button;if(e||s.switch(t),i>n&&"text"===s.settings.content)t.classList.add(s.classes.hidden),t.style.height=n+"px",c(),d(),u(),g();else if("elements"===s.settings.content){let e=t.dataset.elements||"item",s=t.querySelectorAll("."+e),i=Number(t.dataset.cnt)||5,n=1;for(const t of s)n>i&&t.classList.add("d-none"),n++;!0===r&&(r=n-1>i),c(),d(),u(),g()}function c(){if(o){let e=t.dataset.line||s.settings.ellipsis.line;a=!1,e?(t.classList.add(s.classes.ellipsis),t.style.webkitLineClamp=e):console.log("The [data-line] or param[line] variable should not be empty")}}function d(){l&&t.classList.add(s.classes.transition)}function u(){a&&t.classList.add(s.classes.fade)}function g(){if(e&&(t.setAttribute("id",s.target),r)){let e=t.dataset.buttonMore||s.settings.buttonText.more;t.insertAdjacentHTML("afterend",'<div  class="'+s.classes.button+'"><a href="#" aria-expanded="false" data-rollup-toggle="'+s.target+'">'+e+"</a></div>")}}}switch(t,e=!1){const s=this;if(e)this.init(t,!1);else if(t.classList.remove(this.classes.hidden),t.classList.remove(this.classes.ellipsis),t.classList.remove(this.classes.fade),t.removeAttribute("style"),"elements"===s.settings.content){let e=t.dataset.elements,s=[...t.querySelectorAll("."+e)];s.length&&s.forEach((t=>t.classList.remove("d-none")))}}toggle(t,e){let s=this;t.onclick=function(t){let e=t.target,i=e.dataset.rollupToggle,n=e.getAttribute("aria-expanded"),a=document.getElementById(i);return"false"===n?(e.setAttribute("aria-expanded",!0),e.text=a.dataset.buttonLess||s.settings.buttonText.less,s.switch(a,!1)):(e.setAttribute("aria-expanded",!1),e.text=a.dataset.buttonMore||s.settings.buttonText.more,s.switch(a,!0)),!1}}}function e(...t){const s=t=>t&&"object"==typeof t;return t.reduce(((t,i)=>(Object.keys(i).forEach((n=>{const a=t[n],l=i[n];Array.isArray(a)&&Array.isArray(l)?t[n]=a.concat(...l):s(a)&&s(l)?t[n]=e(a,l):t[n]=l})),t)),{})}export{t as VGRollup};
