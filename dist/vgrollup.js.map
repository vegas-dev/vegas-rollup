{"version":3,"file":"vgrollup.js","mappings":"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","sources":["webpack://vg/webpack/bootstrap","webpack://vg/webpack/runtime/define property getters","webpack://vg/webpack/runtime/hasOwnProperty shorthand","webpack://vg/webpack/runtime/make namespace object","webpack://vg/./src/VGRollup/js/VGRollup.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","class VGRollup {\r\n\tconstructor(target, arg, callback) {\r\n\t\tthis.target = target || undefined;\r\n\t\tthis.classes = {\r\n\t\t\thidden: \"vg-rollup-content--hidden\",\r\n\t\t\tfade: \"vg-rollup-content--fade\",\r\n\t\t\tellipsis: \"vg-rollup-content--ellipsis\",\r\n\t\t\tbutton: \"vg-rollup-content--button\",\r\n\t\t\ttransition: \"vg-rollup-content--transition\"\r\n\t\t};\r\n\r\n\t\tthis.total = 0;\r\n\t\tthis.count = 0;\r\n\r\n\t\tthis.settings = mergeDeepObject({\r\n\t\t\tcontent: 'text',\r\n\t\t\tfade: true,\r\n\t\t\ttransition: false,\r\n\t\t\tellipsis: {\r\n\t\t\t\tline: null\r\n\t\t\t},\r\n\t\t\tbutton: true,\r\n\t\t\tshowNum: false,\r\n\t\t\tshowNumText: ' more ',\r\n\t\t\tbuttonText: {\r\n\t\t\t\tmore: \"Show\",\r\n\t\t\t\tless: \"Hide\"\r\n\t\t\t}\r\n\t\t}, arg);\r\n\r\n\t\tif (this.target) {\r\n\t\t\tlet $element = document.getElementById(this.target);\r\n\t\t\tthis.init($element);\r\n\r\n\t\t\tlet $toggle = document.querySelector(\"[data-rollup-toggle=\\\"\" + this.target + \"\\\"]\");\r\n\t\t\tif ($toggle) this.toggle($toggle, callback);\r\n\t\t} else {\r\n\t\t\tconsole.error(\"Initialization failed\");\r\n\t\t}\r\n\t}\r\n\r\n\tinit($self, isButtonAppend = true) {\r\n\t\tlet _this = this,\r\n\t\t\tself_height = $self.clientHeight, set_height = parseInt($self.dataset.height) || (self_height / 2);\r\n\r\n\t\tlet isFade = $self.dataset.fade !== \"false\" && _this.settings.fade,\r\n\t\t\tisTransition = $self.dataset.transition === \"true\" || _this.settings.transition,\r\n\t\t\tisEllipsis = $self.dataset.line || _this.settings.ellipsis.line !== null,\r\n\t\t\tisButton = $self.dataset.button !== \"false\" && _this.settings.button,\r\n\t\t\tisShowNum = $self.dataset.showNum === \"true\" || _this.settings.showNum;\r\n\r\n\t\tif (!isButtonAppend) _this.switch($self);\r\n\r\n\t\tif (self_height > set_height && _this.settings.content === 'text') {\r\n\t\t\t$self.classList.add(_this.classes.hidden);\r\n\t\t\t$self.style.height = set_height + \"px\";\r\n\r\n\t\t\tellipsis();\r\n\t\t\ttransition();\r\n\t\t\tfade();\r\n\t\t\tbutton();\r\n\t\t} else if (_this.settings.content === 'elements') {\r\n\t\t\tlet elementClass = $self.dataset.elements || 'item',\r\n\t\t\t\titems = $self.querySelectorAll('.' + elementClass),\r\n\t\t\t\tcnt = Number($self.dataset.cnt) || 5,\r\n\t\t\t\ti = 1;\r\n\r\n\t\t\t_this.total = items.length;\r\n\t\t\t_this.count = cnt;\r\n\r\n\t\t\tfor (const item of items) {\r\n\t\t\t\tif (i > cnt) {\r\n\t\t\t\t\titem.classList.add('d-none')\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\r\n\t\t\tif (isButton === true) isButton = (i - 1) > cnt;\r\n\r\n\t\t\tellipsis();\r\n\t\t\ttransition();\r\n\t\t\tfade();\r\n\t\t\tbutton();\r\n\t\t}\r\n\r\n\t\tfunction ellipsis() {\r\n\t\t\tif (isEllipsis) {\r\n\t\t\t\tlet line = $self.dataset.line || _this.settings.ellipsis.line;\r\n\t\t\t\tisFade = false;\r\n\r\n\t\t\t\tif (line) {\r\n\t\t\t\t\t$self.classList.add(_this.classes.ellipsis);\r\n\r\n\t\t\t\t\t$self.style.webkitLineClamp = line;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"The [data-line] or param[line] variable should not be empty\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction transition() {\r\n\t\t\tif (isTransition) {\r\n\t\t\t\t// TODO no work\r\n\t\t\t\t$self.classList.add(_this.classes.transition);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction fade() {\r\n\t\t\tif (isFade) {\r\n\t\t\t\t$self.classList.add(_this.classes.fade);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction button() {\r\n\t\t\tif (isButtonAppend) {\r\n\t\t\t\t$self.setAttribute(\"id\", _this.target);\r\n\r\n\t\t\t\tif (isButton) {\r\n\t\t\t\t\tlet textShowNum = '';\r\n\r\n\t\t\t\t\tif (isShowNum) {\r\n\t\t\t\t\t\tlet sum = (_this.total) - (_this.count);\r\n\r\n\t\t\t\t\t\tif (sum > 0) {\r\n\t\t\t\t\t\t\ttextShowNum = ( $self.dataset.showNumText || _this.settings.showNumText) + sum;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet btnTextMore = $self.dataset.buttonMore || _this.settings.buttonText.more;\r\n\t\t\t\t\t$self.insertAdjacentHTML(\"afterend\", \"<div  class=\\\"\" + _this.classes.button + \"\\\"><a href=\\\"#\\\" aria-expanded=\\\"false\\\" data-rollup-toggle=\\\"\" + _this.target + \"\\\">\" + btnTextMore + textShowNum + \"</a></div>\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswitch($self, switcher = false) {\r\n\t\tconst _this = this;\r\n\r\n\t\tif (switcher) {\r\n\t\t\tthis.init($self, false);\r\n\t\t} else {\r\n\t\t\t$self.classList.remove(this.classes.hidden);\r\n\t\t\t$self.classList.remove(this.classes.ellipsis);\r\n\t\t\t$self.classList.remove(this.classes.fade);\r\n\r\n\t\t\t$self.removeAttribute(\"style\");\r\n\r\n\t\t\tif (_this.settings.content === 'elements') {\r\n\t\t\t\tlet className = $self.dataset.elements\r\n\r\n\t\t\t\tlet items = [...$self.querySelectorAll('.' + className)];\r\n\t\t\t\tif (items.length) {\r\n\t\t\t\t\titems.forEach((item) => item.classList.remove('d-none'))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle($toggle, callback) {\r\n\t\tlet $_this = this;\r\n\r\n\t\t$toggle.onclick = function (e) {\r\n\t\t\tlet $btn = e.target, target = $btn.dataset.rollupToggle, aria = $btn.getAttribute(\"aria-expanded\");\r\n\r\n\t\t\tlet $target = document.getElementById(target);\r\n\r\n\t\t\tif (aria === \"false\") {\r\n\t\t\t\t$btn.setAttribute(\"aria-expanded\", true);\r\n\t\t\t\t$btn.text = $target.dataset.buttonLess || $_this.settings.buttonText.less;\r\n\r\n\t\t\t\t$_this.switch($target, false);\r\n\r\n\t\t\t\t// TODO callback the area is show\r\n\t\t\t} else {\r\n\t\t\t\tlet textShowNum = '',\r\n\t\t\t\t\tisShowNum = $target.dataset.showNum === \"true\" || $_this.settings.showNum;\r\n\r\n\t\t\t\tif (isShowNum) {\r\n\t\t\t\t\tlet sum = ($_this.total) - ($_this.count);\r\n\r\n\t\t\t\t\tif (sum > 0) {\r\n\t\t\t\t\t\ttextShowNum = ($target.dataset.showNumText || $_this.settings.showNumText) + sum;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$btn.setAttribute(\"aria-expanded\", false);\r\n\t\t\t\t$btn.text = ($target.dataset.buttonMore || $_this.settings.buttonText.more) + textShowNum;\r\n\r\n\t\t\t\t$_this.switch($target, true);\r\n\r\n\t\t\t\t// TODO callback the area is hide\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\t}\r\n}\r\n\r\n/**\r\n * Глубокое объединение объектов\r\n * @param objects\r\n * @returns {*}\r\n */\r\nfunction mergeDeepObject(...objects) {\r\n\tconst isObject = obj => obj && typeof obj === \"object\";\r\n\r\n\treturn objects.reduce((prev, obj) => {\r\n\t\tObject.keys(obj).forEach(key => {\r\n\t\t\tconst pVal = prev[key];\r\n\t\t\tconst oVal = obj[key];\r\n\r\n\t\t\tif (Array.isArray(pVal) && Array.isArray(oVal)) {\r\n\t\t\t\tprev[key] = pVal.concat(...oVal);\r\n\t\t\t} else if (isObject(pVal) && isObject(oVal)) {\r\n\t\t\t\tprev[key] = mergeDeepObject(pVal, oVal);\r\n\t\t\t} else {\r\n\t\t\t\tprev[key] = oVal;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn prev;\r\n\t}, {});\r\n}\r\n\r\nexport default VGRollup;\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","mergeDeepObject","objects","isObject","reduce","prev","keys","forEach","pVal","oVal","Array","isArray","concat","constructor","target","arg","callback","this","undefined","classes","hidden","fade","ellipsis","button","transition","total","count","settings","content","line","showNum","showNumText","buttonText","more","less","$element","document","getElementById","init","$toggle","querySelector","toggle","console","error","$self","isButtonAppend","_this","self_height","clientHeight","set_height","parseInt","dataset","height","isFade","isTransition","isEllipsis","isButton","isShowNum","switch","classList","add","style","elementClass","elements","items","querySelectorAll","cnt","Number","i","length","item","webkitLineClamp","log","setAttribute","textShowNum","sum","btnTextMore","buttonMore","insertAdjacentHTML","switcher","remove","removeAttribute","className","$_this","onclick","e","$btn","rollupToggle","aria","getAttribute","$target","text","buttonLess"],"sourceRoot":""}